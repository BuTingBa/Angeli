(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/classPost/classPost"],{2707:function(t,o,e){"use strict";var s=function(){var t=this,o=t.$createElement;t._self._c},n=[];e.d(o,"a",function(){return s}),e.d(o,"b",function(){return n})},5140:function(t,o,e){"use strict";(function(t){e("7e16"),e("921b");s(e("66fd"));var o=s(e("c72b"));function s(t){return t&&t.__esModule?t:{default:t}}t(o.default)}).call(this,e("6e42")["createPage"])},"6a2d":function(t,o,e){"use strict";e.r(o);var s=e("d1bc"),n=e.n(s);for(var a in s)"default"!==a&&function(t){e.d(o,t,function(){return s[t]})}(a);o["default"]=n.a},b4bd:function(t,o,e){},c62f:function(t,o,e){"use strict";var s=e("b4bd"),n=e.n(s);n.a},c72b:function(t,o,e){"use strict";e.r(o);var s=e("2707"),n=e("6a2d");for(var a in n)"default"!==a&&function(t){e.d(o,t,function(){return n[t]})}(a);e("c62f");var i=e("2877"),c=Object(i["a"])(n["default"],s["a"],s["b"],!1,null,null,null);o["default"]=c.exports},d1bc:function(t,o,e){"use strict";(function(t,s){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n,a=i(e("26f4"));function i(t){return t&&t.__esModule?t:{default:t}}function c(t,o,e){return o in t?Object.defineProperty(t,o,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[o]=e,t}var u=function(){return e.e("components/uni-load-more").then(e.bind(null,"caa8"))},l={components:{uniLoadMore:u},data:function(){return{TabCur:0,postList:[],status:"loading",type:"new",classinfo:[],statusTypes:[{value:"more",text:"加载前",checked:!0},{value:"loading",text:"加载中",checked:!1},{value:"noMore",text:"我是有底线的",checked:!1}],contentText:{contentdown:"查看更多",contentrefresh:"加载中",contentnomore:"我是有底线的"}}},onLoad:function(t){this.classId=t.id,this.getClassInfo(this.classId),this.getPostList(this.classId)},methods:(n={getPushPost:function(){""==a.default.userinfo.Auid||null==a.default.userinfo.Auid?(t.showToast({title:"你还没有登录，请登录后再来吧",position:"bottom",icon:"none"}),setTimeout(function(){t.navigateTo({url:"../reg/reg"})},1200)):(a.default.postClass=this.classinfo,t.navigateTo({url:"../post/post"}))},getClassInfo:function(o){var e=this;t.request({method:"GET",url:"https://api.angeli.top/post.php?type=getClassInfo",data:{classId:o},header:{"content-type":"application/x-www-form-urlencoded",Cookie:a.default.cookie},success:function(o){t.hideLoading(),e.classinfo=[],e.classinfo=o.data.data,console.log(s(e.classinfo," at pages\\classPost\\classPost.vue:120")),e.weikong=!1,"1"!==o.data.code&&t.showToast({title:"获取话题信息失败",position:"bottom",icon:"none"}),e.$forceUpdate()}})},getpostinfo:function(o){t.navigateTo({url:"../postinfo/postinfo?id="+o})},getbieren:function(o){o==a.default.userinfo.Auid?t.navigateTo({url:"../i/i"}):t.navigateTo({url:"../i/bieren?auid="+o})},getPostList:function(o){var e=this;t.showLoading({title:"获取数据中"}),t.request({method:"GET",url:"https://api.angeli.top/post.php?type=getClassPostList",data:{page:1,count:20,classId:o,postType:this.type},header:{"content-type":"application/x-www-form-urlencoded",Cookie:a.default.cookie},success:function(o){t.hideLoading(),e.postList=[],console.log(s("————————————帖子列表——————————"," at pages\\classPost\\classPost.vue:169")),e.postList=o.data.data,console.log(s(e.postList," at pages\\classPost\\classPost.vue:171")),e.weikong=!1,"1"!==o.data.code&&t.showToast({title:"获取帖子失败，建议重启",position:"bottom",icon:"none"}),0==o.data.data&&(e.weikong=!0)},complete:function(){t.hideLoading()}})},showImage:function(o,e){t.previewImage({current:e,urls:o,longPressActions:{itemList:["发送给朋友","保存图片","收藏"],success:function(o){t.showToast({title:"选中了第"+(o.tapIndex+1)+"个按钮",position:"bottom",icon:"none"}),console.log(s("选中了第"+(o.tapIndex+1)+"个按钮"," at pages\\classPost\\classPost.vue:204"))},fail:function(t){console.log(s(t.errMsg," at pages\\classPost\\classPost.vue:208"))}}})},caidan:function(o){console.log(s(o," at pages\\classPost\\classPost.vue:214")),this.Dindex=o,o.AuthorId==a.default.userinfo.Auid?this.menuList=["分享给朋友","生成海报","举报","删除帖子"]:this.menuList=["分享给朋友","生成海报","举报"],t.showActionSheet({itemList:this.menuList,success:function(o){switch(o.tapIndex){case 0:t.showToast({title:"分享"+o.Content,position:"bottom",icon:"none"});break;case 1:break;case 2:break;case 3:break;default:}},fail:function(t){console.log(s(t.errMsg," at pages\\classPost\\classPost.vue:246"))}})}},c(n,"showImage",function(o,e){t.previewImage({current:e,urls:o,longPressActions:{itemList:["发送给朋友","保存图片","收藏"],success:function(o){t.showToast({title:"选中了第"+(o.tapIndex+1)+"个按钮",position:"bottom",icon:"none"}),console.log(s("选中了第"+(o.tapIndex+1)+"个按钮"," at pages\\classPost\\classPost.vue:263"))},fail:function(t){console.log(s(t.errMsg," at pages\\classPost\\classPost.vue:267"))}}})}),c(n,"Like",function(o,e,s,n){var i=this;if(!0===s)var c="del";else c="add";t.request({method:"GET",url:"https://api.angeli.top/post.php?type=Like",data:{fuid:e,postid:o,mode:c},header:{"content-type":"application/x-www-form-urlencoded",Cookie:a.default.cookie},success:function(o){"1"==o.data.code?("add"==c?(i.postList[n].Give=!0,t.showToast({title:"种草成功！",position:"bottom",icon:"none"})):(i.postList[n].Give=!1,t.showToast({title:"取消种草成功！",position:"bottom",icon:"none"})),i.$forceUpdate()):t.showToast({title:"种草失败！",position:"bottom",icon:"none"})},complete:function(){}})}),c(n,"tabSelect",function(t){this.TabCur=t,this.type=0==t?"new":"hot"}),n)};o.default=l}).call(this,e("6e42")["default"],e("0de9")["default"])}},[["5140","common/runtime","common/vendor"]]]);