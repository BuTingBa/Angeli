(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/Home/Home"],{"7e16":function(e,o,t){"use strict";t.r(o);var n=t("fc89"),a=t.n(n);for(var s in n)"default"!==s&&function(e){t.d(o,e,function(){return n[e]})}(s);o["default"]=a.a},ade8:function(e,o,t){"use strict";var n=function(){var e=this,o=e.$createElement;e._self._c},a=[];t.d(o,"a",function(){return n}),t.d(o,"b",function(){return a})},d374:function(e,o,t){"use strict";t.r(o);var n=t("ade8"),a=t("7e16");for(var s in a)"default"!==s&&function(e){t.d(o,e,function(){return a[e]})}(s);t("e536");var i=t("2877"),u=Object(i["a"])(a["default"],n["a"],n["b"],!1,null,null,null);o["default"]=u.exports},e536:function(e,o,t){"use strict";var n=t("f9c0"),a=t.n(n);a.a},f9c0:function(e,o,t){},fc89:function(e,o,t){"use strict";(function(e){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=a(t("9ca3"));function a(e){return e&&e.__esModule?e:{default:e}}function s(e,o,t){return o in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e}var i=function(){return t.e("components/uni-load-more").then(t.bind(null,"9b93"))},u={components:{uniLoadMore:i},data:function(){return{Dindex:[],CustomBar:this.CustomBar,modalName:null,AvatarUrl:"",TabCur:0,gaodu:0,weikong:!0,username:"游客",page:1,postList:[],scrollTop:0,old:{scrollTop:0},status:"loading",statusTypes:[{value:"more",text:"加载前",checked:!0},{value:"loading",text:"加载中",checked:!1},{value:"noMore",text:"我是有底线的",checked:!1}],contentText:{contentdown:"查看更多",contentrefresh:"加载中",contentnomore:"我是有底线的"},zhongcao:"0",guanzhu:"0",userid:"0",fensi:"0",dengji:"0",index:!1}},onLoad:function(o){1==o.id&&(console.log(o," at pages\\Home\\Home.vue:252"),this.index=!0),console.log("APP:",n.default.userinfo," at pages\\Home\\Home.vue:257"),e.getStorage({key:"userinfo",success:function(o){n.default.userinfo=o.data,console.log("appgeiuser",n.default.userinfo," at pages\\Home\\Home.vue:262"),console.log("检测服务：：：",n.default.userinfo.AvatarUrl," at pages\\Home\\Home.vue:263"),e.getStorage({key:"cookie",success:function(e){n.default.cookie=e.data,console.log("cookie",n.default.cookie," at pages\\Home\\Home.vue:268")}})}}),console.log("测试！：5",this.username," at pages\\Home\\Home.vue:339")},onReady:function(){console.log("测试！：",this.username," at pages\\Home\\Home.vue:343"),console.log("____________________"," at pages\\Home\\Home.vue:344"),this.getHei(),this.postList=[]},methods:{getFriend:function(){e.navigateTo({url:"../menu/friend"})},getbieren:function(o){e.navigateTo({url:"../i/bieren?auid="+o})},getShoucang:function(){e.navigateTo({url:"../menu/shoucang"})},getJifen:function(){e.navigateTo({url:"../menu/jifen"})},getMessage:function(){e.navigateTo({url:"../menu/Message"})},set:function(){e.navigateTo({url:"../set/set"})},logout:function(){e.clearStorage(),e.showToast(s({title:"已退出登录",position:"bottom",icon:"none"},"position","center")),n.default.userinfo=[],n.default.cookie="",this.modalName=null},cs:function(e){this.old.scrollTop=e.detail.scrollTop},sousuo:function(){e.navigateTo({url:"../sousuo/sousuo"})},getClass:function(o){e.navigateTo({url:"../classPost/classPost?id="+o})},showModal:function(e){this.modalName=e.currentTarget.dataset.target,this.AvatarUrl=n.default.userinfo.AvatarUrl,this.username=n.default.userinfo.UserName,this.zhongcao=n.default.userinfo.ZhongcaoCount,this.guanzhu=n.default.userinfo.FollowedCount,this.fensi=n.default.userinfo.FollowerCount,this.dengji=n.default.userinfo.Rank,this.userid=n.default.userinfo.Auid,console.log("测试！：",this.username," at pages\\Home\\Home.vue:415")},hideModal:function(e){this.modalName=null},tabSelect:function(e){this.TabCur=e,this.scrollTop=this.old.scrollTop,this.$nextTick(function(){this.scrollTop=0}),console.log(e," at pages\\Home\\Home.vue:426"),0==e?this.getPostData("new",0):1==e?this.getPostData("hot",0):2==e&&this.getPostData("guanzhu",0)},Like:function(o,t,a,s){var i=this;if(!0===a)var u="del";else u="add";e.request({method:"GET",url:"https://api.angeli.top/post.php?type=Like",data:{fuid:t,postid:o,mode:u},header:{"content-type":"application/x-www-form-urlencoded",Cookie:n.default.cookie},success:function(o){"1"==o.data.code?("add"==u?(i.postList[s].Give=!0,e.showToast({title:"种草成功！",position:"bottom",icon:"none"})):(i.postList[s].Give=!1,e.showToast({title:"取消种草成功！",position:"bottom",icon:"none"})),i.$forceUpdate()):e.showToast({title:"种草失败！",position:"bottom",icon:"none"})},complete:function(){}})},caidan:function(o){console.log(o," at pages\\Home\\Home.vue:488"),this.Dindex=o,e.showActionSheet({itemList:["分享给朋友","生成海报","举报"],success:function(o){0==o.tapIndex&&e.showToast({title:"分享"+o.Content,position:"bottom",icon:"none"})},fail:function(e){console.log(e.errMsg," at pages\\Home\\Home.vue:502")}})},getHei:function(){var o=this,t=e.createSelectorQuery().select("#topbox");t.fields({size:!0,scrollOffset:!0},function(e){o.gaodu=e.height-5,console.log("总高度："+o.gaodu," at pages\\Home\\Home.vue:514")}).exec()},showImage:function(o,t){e.previewImage({current:t,urls:o,longPressActions:{itemList:["发送给朋友","保存图片","收藏"],success:function(o){e.showToast({title:"选中了第"+(o.tapIndex+1)+"个按钮",position:"bottom",icon:"none"}),console.log("选中了第"+(o.tapIndex+1)+"个按钮"," at pages\\Home\\Home.vue:530")},fail:function(e){console.log(e.errMsg," at pages\\Home\\Home.vue:534")}}})},getPostData:function(o,t){var a=this;e.showLoading({title:"获取数据中"}),console.log(o," at pages\\Home\\Home.vue:543"),e.request({method:"GET",url:"https://api.angeli.top/post.php?type=outPostList",data:{page:0,postType:o,count:10,classId:t},header:{"content-type":"application/x-www-form-urlencoded",Cookie:n.default.cookie},success:function(o){e.hideLoading(),a.postList=[],console.log(o.data.data," at pages\\Home\\Home.vue:560"),console.log("————————————帖子列表——————————"," at pages\\Home\\Home.vue:561"),a.postList=o.data.data,console.log(a.postList," at pages\\Home\\Home.vue:563"),a.weikong=!1,"1"!==o.data.code&&e.showToast({title:"获取帖子失败，建议重启",position:"bottom",icon:"none"}),0==o.data.data&&(a.weikong=!0),a.$forceUpdate()},complete:function(){e.hideLoading()}})},reguser:function(){""==n.default.userinfo.Auid||null==n.default.userinfo.Auid?e.navigateTo({url:"../reg/reg"}):e.navigateTo({url:"../i/i"})},getVip:function(){e.navigateTo({url:"../vip/vip"})},pluspost:function(){console.log("发帖：",n.default.userinfo.Auid," at pages\\Home\\Home.vue:603"),""==n.default.userinfo.Auid||null==n.default.userinfo.Auid?(e.showToast({title:"你还没有登录，请登录后再来吧",position:"bottom",icon:"none"}),setTimeout(function(){e.navigateTo({url:"../reg/reg"})},1200)):e.navigateTo({url:"../post/post"})},EndLoding:function(o){var t=this;this.page++,console.log(this.scrollTop," at pages\\Home\\Home.vue:624"),e.request({method:"GET",url:"https://api.angeli.top/post.php?type=outPostList",data:{page:this.page,posttype:"1",sort:"PsotDate",count:10},header:{"content-type":"application/x-www-form-urlencoded",Cookie:n.default.cookie},success:function(e){console.log("————————————帖子列表——————————"+t.page," at pages\\Home\\Home.vue:639"),void 0==e.data.data.length?(t.page--,t.status="noMore"):(t.postList=t.postList.concat(e.data.data),t.status="loading",console.log(t.postList," at pages\\Home\\Home.vue:646"))}})},getpostinfo:function(o){e.navigateTo({url:"../postinfo/postinfo?id="+o})}},onShareAppMessage:function(e){return"button"===e.from&&console.log(e.target," at pages\\Home\\Home.vue:661"),{title:this.postInfo.Content,path:"/pages/postinfo/postinfo?id="+this.postid,desc:this.postInfo.Content,imageUrl:this.postInfo.PictureId[0]}}};o.default=u}).call(this,t("6e42")["default"])}},[["670f","common/runtime","common/vendor"]]]);