(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/sousuo/sousuo"],{2602:function(t,o,e){"use strict";var s=e("9d2a"),a=e.n(s);a.a},"63bb":function(t,o,e){"use strict";var s=function(){var t=this,o=t.$createElement;t._self._c},a=[];e.d(o,"a",function(){return s}),e.d(o,"b",function(){return a})},"63fd":function(t,o,e){"use strict";e.r(o);var s=e("ff76"),a=e.n(s);for(var n in s)"default"!==n&&function(t){e.d(o,t,function(){return s[t]})}(n);o["default"]=a.a},"956f":function(t,o,e){"use strict";e.r(o);var s=e("63bb"),a=e("63fd");for(var n in a)"default"!==n&&function(t){e.d(o,t,function(){return a[t]})}(n);e("2602");var u=e("2877"),i=Object(u["a"])(a["default"],s["a"],s["b"],!1,null,null,null);o["default"]=i.exports},"9d2a":function(t,o,e){},cdfe:function(t,o,e){"use strict";(function(t){e("7e16"),e("921b");s(e("66fd"));var o=s(e("956f"));function s(t){return t&&t.__esModule?t:{default:t}}t(o.default)}).call(this,e("6e42")["createPage"])},ff76:function(t,o,e){"use strict";(function(t,s){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=n(e("26f4"));function n(t){return t&&t.__esModule?t:{default:t}}var u=function(){return e.e("components/uni-load-more").then(e.bind(null,"caa8"))},i={components:{uniLoadMore:u},data:function(){return{gaodu:0,classList:[],home:!0,TabCur:0,inputVal:"",postList:[],userList:[],page:1,status:"loading",statusTypes:[{value:"more",text:"加载前",checked:!0},{value:"loading",text:"加载中",checked:!1},{value:"noMore",text:"我是有底线的",checked:!1}],contentText:{contentdown:"查看更多",contentrefresh:"加载中",contentnomore:"我是有底线的"},weikong:!0,hotList:[]}},onReady:function(){this.getHei()},onLoad:function(){var o=this;t.request({method:"GET",url:"https://api.angeli.top/post.php?type=getClassList",header:{"content-type":"application/x-www-form-urlencoded",Cookie:a.default.cookie},success:function(t){o.classList=t.data.data,console.log(s(o.classList," at pages\\sousuo\\sousuo.vue:162"))}}),this.getDayHot()},onReachBottom:function(){var o=this;this.page++,t.request({method:"GET",url:"https://api.angeli.top/post.php?type=searchPosts",data:{keyword:this.inputVal,count:20,page:this.page},header:{"content-type":"application/x-www-form-urlencoded",Cookie:a.default.cookie},success:function(t){console.log(s("————————————帖子列表——————————"+o.page," at pages\\sousuo\\sousuo.vue:182")),void 0==t.data.data.length?(o.page--,o.status="noMore"):(o.postList=o.postList.concat(t.data.data),o.status="loading",o.$forceUpdate(),console.log(s(o.postList," at pages\\sousuo\\sousuo.vue:190")))}})},methods:{sososo:function(t){this.home=!1,this.requestSousuo(0)},getDayHot:function(){var o=this;t.request({method:"GET",url:"https://api.angeli.top/user.php?type=getDayHot",header:{"content-type":"application/x-www-form-urlencoded",Cookie:a.default.cookie,system:a.default.system},success:function(t){o.hotList=t.data.data.data,console.log(s(o.hotList," at pages\\sousuo\\sousuo.vue:214"))}})},requestSousuo:function(o){var e=this;0==o?(t.showLoading({title:"搜索中..",mask:!0}),t.request({method:"GET",url:"https://api.angeli.top/post.php?type=searchPosts",data:{keyword:this.inputVal,count:20,page:this.page},header:{"content-type":"application/x-www-form-urlencoded",Cookie:a.default.cookie,system:a.default.system},success:function(t){e.postList=[],console.log(s(t.data.data," at pages\\sousuo\\sousuo.vue:239")),console.log(s("————————————帖子列表——————————"," at pages\\sousuo\\sousuo.vue:240")),e.postList=t.data.data,console.log(s(e.postList," at pages\\sousuo\\sousuo.vue:242")),e.weikong=!1,"1"!==t.data.code&&(e.weikong=!0),0==t.data.data&&(e.weikong=!0),t.data.data.length<21&&(e.status="noMore"),e.$forceUpdate()},complete:function(){t.hideLoading()}})):(t.showLoading({title:"搜索中..",mask:!0}),t.request({method:"GET",url:"https://api.angeli.top/user.php?type=search",data:{keyword:this.inputVal},header:{"content-type":"application/x-www-form-urlencoded",Cookie:a.default.cookie,system:a.default.system},success:function(t){e.userList=[],console.log(s(t.data.data," at pages\\sousuo\\sousuo.vue:277")),console.log(s("————————————搜索用户列表——————————"," at pages\\sousuo\\sousuo.vue:278")),e.userList=t.data.data,console.log(s(e.userList," at pages\\sousuo\\sousuo.vue:280")),e.weikong=!1,"1"!==t.data.code&&(e.weikong=!0),0==t.data.data&&(e.weikong=!0),t.data.data.length<21&&(e.status="noMore"),e.$forceUpdate()},complete:function(){t.hideLoading()}}))},getPOST:function(o){t.navigateTo({url:"../classPost/classPost?id="+o})},getpostinfo:function(o){t.navigateTo({url:"../postinfo/postinfo?id="+o})},getClass:function(o){t.navigateTo({url:"../classPost/classPost?id="+o})},Like:function(o,e,s,n,u){var i=this;if(e!=a.default.userinfo.Auid){if(!0===s)var c="del";else c="add";t.request({method:"GET",url:"https://api.angeli.top/post.php?type=Like",data:{fuid:e,postid:o,mode:c},header:{"content-type":"application/x-www-form-urlencoded",Cookie:a.default.cookie},success:function(o){"1"==o.data.code?("add"==c?(i.postList[n].ZhongcaoCount=Number(u)+1,i.postList[n].Give=!0,t.showToast({title:"种草成功！",position:"bottom",icon:"none"})):(i.postList[n].ZhongcaoCount=Number(u)-1,i.postList[n].Give=!1,t.showToast({title:"取消种草成功！",position:"bottom",icon:"none"})),i.$forceUpdate()):t.showToast({title:"种草失败！",position:"bottom",icon:"none"})},complete:function(){}})}else t.showToast({title:"不能给自己种草",position:"bottom",icon:"none"})},zan:function(){t.showToast({title:"点赞",position:"bottom",icon:"none"})},caidan:function(o){var e=this;o.AuthorId==a.default.userinfo.Auid?this.menuList=["生成海报","举报","删除帖子"]:this.menuList=["生成海报","举报"],t.showActionSheet({itemList:this.menuList,success:function(s){switch(s.tapIndex){case 0:t.showToast({title:"分享"+o.Content,position:"bottom",icon:"none"});break;case 1:t.showToast({title:"举报成功",position:"bottom",icon:"none"}),e.$jubao(o.PostsId,a.default.userinfo.Auid,o.AuthorId,"没有理由");break;case 2:e.$delPost(o.PostsId);break;default:}},fail:function(t){console.log(s(t.errMsg," at pages\\sousuo\\sousuo.vue:417"))}})},tabSelect:function(t){this.TabCur=t,this.requestSousuo(t)},input:function(t){this.inputVal=t.detail.value,this.home=!0,console.log(s(this.inputVal," at pages\\sousuo\\sousuo.vue:428"))},getbieren:function(o){t.navigateTo({url:"../i/bieren?auid="+o})},getHei:function(){var o=this,e=t.createSelectorQuery().select("#topbox");e.fields({size:!0,scrollOffset:!0},function(t){o.gaodu=t.height,console.log(s("总高度："+o.gaodu," at pages\\sousuo\\sousuo.vue:442"))}).exec()},log:function(t){console.log(s(t," at pages\\sousuo\\sousuo.vue:446"))},showImage:function(o,e){t.previewImage({current:e,urls:o,longPressActions:{itemList:["发送给朋友","保存图片","收藏"],success:function(o){t.showToast({title:"选中了第"+(o.tapIndex+1)+"个按钮",position:"bottom",icon:"none"}),console.log(s("选中了第"+(o.tapIndex+1)+"个按钮"," at pages\\sousuo\\sousuo.vue:461"))},fail:function(t){console.log(s(t.errMsg," at pages\\sousuo\\sousuo.vue:465"))}}})},adduser:function(o,e){var s=this;t.request({method:"GET",url:"https://api.angeli.top/user.php?type=gzORungz",data:{uid:o},header:{"content-type":"application/x-www-form-urlencoded",Cookie:a.default.cookie},success:function(o){t.showToast({title:o.data.msg,position:"bottom",icon:"none"}),"关注成功"==o.data.msg?s.hotList[e].AuId.isGz=!0:s.hotList[e].AuId.isGz=!1}})}}};o.default=i}).call(this,e("6e42")["default"],e("0de9")["default"])}},[["cdfe","common/runtime","common/vendor"]]]);