(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/sousuo/sousuo"],{2602:function(t,o,e){"use strict";var s=e("9d2a"),n=e.n(s);n.a},"63e1":function(t,o,e){"use strict";var s=function(){var t=this,o=t.$createElement;t._self._c},n=[];e.d(o,"a",function(){return s}),e.d(o,"b",function(){return n})},"63fd":function(t,o,e){"use strict";e.r(o);var s=e("ff76"),n=e.n(s);for(var a in s)"default"!==a&&function(t){e.d(o,t,function(){return s[t]})}(a);o["default"]=n.a},"956f":function(t,o,e){"use strict";e.r(o);var s=e("63e1"),n=e("63fd");for(var a in n)"default"!==a&&function(t){e.d(o,t,function(){return n[t]})}(a);e("2602");var u=e("2877"),i=Object(u["a"])(n["default"],s["a"],s["b"],!1,null,null,null);o["default"]=i.exports},"9d2a":function(t,o,e){},cdfe:function(t,o,e){"use strict";(function(t){e("7e16"),e("921b");s(e("66fd"));var o=s(e("956f"));function s(t){return t&&t.__esModule?t:{default:t}}t(o.default)}).call(this,e("6e42")["createPage"])},ff76:function(t,o,e){"use strict";(function(t,s){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=a(e("26f4"));function a(t){return t&&t.__esModule?t:{default:t}}var u=function(){return e.e("components/uni-load-more").then(e.bind(null,"caa8"))},i={components:{uniLoadMore:u},data:function(){return{gaodu:0,classList:[],home:!0,TabCur:0,inputVal:"",postList:[],userList:[],Dindex:[],showAppFenxiang:!1,page:1,status:"loading",statusTypes:[{value:"more",text:"加载前",checked:!0},{value:"loading",text:"加载中",checked:!1},{value:"noMore",text:"我是有底线的",checked:!1}],contentText:{contentdown:"查看更多",contentrefresh:"加载中",contentnomore:"我是有底线的"},weikong:!0,hotList:[]}},onReady:function(){this.getHei()},onLoad:function(){var o=this;t.request({method:"GET",url:"https://api.angeli.top/post.php?type=getClassList",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){o.classList=t.data.data,console.log(s(o.classList," at pages\\sousuo\\sousuo.vue:165"))}}),this.getDayHot()},onReachBottom:function(){var o=this;this.page++,t.request({method:"GET",url:"https://api.angeli.top/post.php?type=searchPosts",data:{keyword:this.inputVal,count:20,page:this.page,token:n.default.token},header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){console.log(s("————————————帖子列表——————————"+o.page," at pages\\sousuo\\sousuo.vue:185")),void 0==t.data.data.length?(o.page--,o.status="noMore"):(o.postList=o.postList.concat(t.data.data),o.status="loading",o.$forceUpdate(),console.log(s(o.postList," at pages\\sousuo\\sousuo.vue:193")))}})},methods:{appFenxiang:function(o,e){switch(o){case 0:this.showAppFenxiang=!1;break;case 1:t.setClipboardData({data:"http://share.angeli.top/?postId="+this.postid,success:function(){console.log(s("success"," at pages\\sousuo\\sousuo.vue:210"))}}),console.log(s("复制链接"," at pages\\sousuo\\sousuo.vue:213"));break;case 2:console.log(s(this.Dindex.PictureId[0]," at pages\\sousuo\\sousuo.vue:216")),console.log(s(this.Dindex.Content," at pages\\sousuo\\sousuo.vue:217")),console.log(s("http://share.angeli.top/?postId="+this.Dindex.PostsId," at pages\\sousuo\\sousuo.vue:218")),t.share({provider:"weixin",scene:"WXSceneSession",type:5,imageUrl:this.Dindex.PictureId[0],title:this.Dindex.Content,miniProgram:{id:"gh_a38adc10b952",path:"pages/postinfo/postinfo?id="+this.Dindex.PostsId,type:0,webUrl:"http://share.angeli.top/?postId="+this.Dindex.PostsId},success:function(t){console.log(s(JSON.stringify(t)," at pages\\sousuo\\sousuo.vue:232"))},fail:function(t){console.log(s("fail:"+JSON.stringify(t)," at pages\\sousuo\\sousuo.vue:235"))}});break;case 3:t.share({provider:"weixin",scene:"WXSenceTimeline",type:0,href:"http://share.angeli.top/?postId="+this.Dindex.PostsId,title:this.Dindex.Content,summary:this.Dindex.Content,imageUrl:this.Dindex.PictureId[0],success:function(t){console.log(s("success:"+JSON.stringify(t)," at pages\\sousuo\\sousuo.vue:249"))},fail:function(t){console.log(s("fail:"+JSON.stringify(t)," at pages\\sousuo\\sousuo.vue:252"))}});break;case 4:t.share({provider:"qq",type:1,href:"http://share.angeli.top/?postId="+this.Dindex.PostsId,summary:this.Dindex.Content,title:this.Dindex.Content,imageUrl:this.Dindex.PictureId[0],success:function(t){console.log(s("success:"+JSON.stringify(t)," at pages\\sousuo\\sousuo.vue:265"))},fail:function(t){console.log(s("fail:"+JSON.stringify(t)," at pages\\sousuo\\sousuo.vue:268"))}});break;default:}},sososo:function(t){this.home=!1,this.requestSousuo(0)},getDayHot:function(){var o=this;t.request({method:"GET",url:"https://api.angeli.top/user.php?type=getDayHot",data:{token:n.default.token},header:{"content-type":"application/x-www-form-urlencoded",system:n.default.system},success:function(t){o.hotList=t.data.data.data,console.log(s(o.hotList," at pages\\sousuo\\sousuo.vue:294"))}})},requestSousuo:function(o){var e=this;0==o?(t.showLoading({title:"搜索中..",mask:!0}),t.request({method:"GET",url:"https://api.angeli.top/post.php?type=searchPosts",data:{keyword:this.inputVal,count:20,page:this.page,token:n.default.token},header:{"content-type":"application/x-www-form-urlencoded",system:n.default.system},success:function(t){e.postList=[],console.log(s(t.data.data," at pages\\sousuo\\sousuo.vue:319")),console.log(s("————————————帖子列表——————————"," at pages\\sousuo\\sousuo.vue:320")),e.postList=t.data.data,console.log(s(e.postList," at pages\\sousuo\\sousuo.vue:322")),e.weikong=!1,"1"!==t.data.code&&(e.weikong=!0),0==t.data.data&&(e.weikong=!0),t.data.data.length<21&&(e.status="noMore"),e.$forceUpdate()},complete:function(){t.hideLoading()}})):(t.showLoading({title:"搜索中..",mask:!0}),t.request({method:"GET",url:"https://api.angeli.top/user.php?type=search",data:{keyword:this.inputVal,token:n.default.token},header:{"content-type":"application/x-www-form-urlencoded",system:n.default.system},success:function(t){e.userList=[],console.log(s(t.data.data," at pages\\sousuo\\sousuo.vue:357")),console.log(s("————————————搜索用户列表——————————"," at pages\\sousuo\\sousuo.vue:358")),e.userList=t.data.data,console.log(s(e.userList," at pages\\sousuo\\sousuo.vue:360")),e.weikong=!1,"1"!==t.data.code&&(e.weikong=!0),0==t.data.data&&(e.weikong=!0),t.data.data.length<21&&(e.status="noMore"),e.$forceUpdate()},complete:function(){t.hideLoading()}}))},getPOST:function(o){t.navigateTo({url:"../classPost/classPost?id="+o})},getpostinfo:function(o){t.navigateTo({url:"../postinfo/postinfo?id="+o})},getClass:function(o){t.navigateTo({url:"../classPost/classPost?id="+o})},Like:function(o,e,s,a,u){var i=this;if(e!=n.default.userinfo.Auid){if(!0===s)var c="del";else c="add";t.request({method:"GET",url:"https://api.angeli.top/post.php?type=Like",data:{fuid:e,postid:o,mode:c,token:n.default.token},header:{"content-type":"application/x-www-form-urlencoded"},success:function(o){"1"==o.data.code?("add"==c?(i.postList[a].ZhongcaoCount=Number(u)+1,i.postList[a].Give=!0,t.showToast({title:"种草成功！",position:"bottom",icon:"none"})):(i.postList[a].ZhongcaoCount=Number(u)-1,i.postList[a].Give=!1,t.showToast({title:"取消种草成功！",position:"bottom",icon:"none"})),i.$forceUpdate()):t.showToast({title:"种草失败！",position:"bottom",icon:"none"})},complete:function(){}})}else t.showToast({title:"不能给自己种草",position:"bottom",icon:"none"})},zan:function(){t.showToast({title:"点赞",position:"bottom",icon:"none"})},caidan:function(o){var e=this;o.AuthorId==n.default.userinfo.Auid?this.menuList=["分享","举报","删除帖子"]:this.menuList=["分享","举报"],t.showActionSheet({itemList:this.menuList,success:function(s){switch(s.tapIndex){case 0:e.showAppFenxiang=!0;break;case 1:t.showToast({title:"举报成功",position:"bottom",icon:"none"}),e.$jubao(o.PostsId,n.default.userinfo.Auid,o.AuthorId,"没有理由");break;case 2:e.$delPost(o.PostsId);break;default:}},fail:function(t){console.log(s(t.errMsg," at pages\\sousuo\\sousuo.vue:494"))}})},tabSelect:function(t){this.TabCur=t,this.requestSousuo(t)},input:function(t){this.inputVal=t.detail.value,this.home=!0,console.log(s(this.inputVal," at pages\\sousuo\\sousuo.vue:505"))},getbieren:function(o){t.navigateTo({url:"../i/bieren?auid="+o})},getHei:function(){var o=this,e=t.createSelectorQuery().select("#topbox");e.fields({size:!0,scrollOffset:!0},function(t){o.gaodu=t.height,console.log(s("总高度："+o.gaodu," at pages\\sousuo\\sousuo.vue:519"))}).exec()},log:function(t){console.log(s(t," at pages\\sousuo\\sousuo.vue:523"))},showImage:function(o,e){t.previewImage({current:e,urls:o,longPressActions:{itemList:["发送给朋友","保存图片","收藏"],success:function(o){t.showToast({title:"选中了第"+(o.tapIndex+1)+"个按钮",position:"bottom",icon:"none"}),console.log(s("选中了第"+(o.tapIndex+1)+"个按钮"," at pages\\sousuo\\sousuo.vue:538"))},fail:function(t){console.log(s(t.errMsg," at pages\\sousuo\\sousuo.vue:542"))}}})},adduser:function(o,e){var s=this;t.request({method:"GET",url:"https://api.angeli.top/user.php?type=gzORungz",data:{uid:o,token:n.default.token},header:{"content-type":"application/x-www-form-urlencoded"},success:function(o){t.showToast({title:o.data.msg,position:"bottom",icon:"none"}),"关注成功"==o.data.msg?s.hotList[e].AuId.isGz=!0:s.hotList[e].AuId.isGz=!1}})}}};o.default=i}).call(this,e("6e42")["default"],e("0de9")["default"])}},[["cdfe","common/runtime","common/vendor"]]]);