(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/sousuo/sousuo"],{2602:function(o,t,e){"use strict";var s=e("9d2a"),a=e.n(s);a.a},"63fd":function(o,t,e){"use strict";e.r(t);var s=e("ff76"),a=e.n(s);for(var n in s)"default"!==n&&function(o){e.d(t,o,function(){return s[o]})}(n);t["default"]=a.a},"956f":function(o,t,e){"use strict";e.r(t);var s=e("aad6"),a=e("63fd");for(var n in a)"default"!==n&&function(o){e.d(t,o,function(){return a[o]})}(n);e("2602");var u=e("2877"),i=Object(u["a"])(a["default"],s["a"],s["b"],!1,null,null,null);t["default"]=i.exports},"9d2a":function(o,t,e){},aad6:function(o,t,e){"use strict";var s=function(){var o=this,t=o.$createElement;o._self._c},a=[];e.d(t,"a",function(){return s}),e.d(t,"b",function(){return a})},cdfe:function(o,t,e){"use strict";(function(o){e("7e16"),e("921b");s(e("66fd"));var t=s(e("956f"));function s(o){return o&&o.__esModule?o:{default:o}}o(t.default)}).call(this,e("6e42")["createPage"])},ff76:function(o,t,e){"use strict";(function(o,s){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(e("26f4"));function n(o){return o&&o.__esModule?o:{default:o}}var u=function(){return e.e("components/uni-load-more").then(e.bind(null,"caa8"))},i={components:{uniLoadMore:u},data:function(){return{gaodu:0,classList:[],home:!0,TabCur:0,inputVal:"",postList:[],userList:[],page:1,status:"loading",statusTypes:[{value:"more",text:"加载前",checked:!0},{value:"loading",text:"加载中",checked:!1},{value:"noMore",text:"我是有底线的",checked:!1}],contentText:{contentdown:"查看更多",contentrefresh:"加载中",contentnomore:"我是有底线的"},weikong:!0,hotList:[]}},onReady:function(){this.getHei()},onLoad:function(){var t=this;o.request({method:"GET",url:"https://api.angeli.top/post.php?type=getClassList",header:{"content-type":"application/x-www-form-urlencoded",Cookie:a.default.cookie},success:function(o){t.classList=o.data.data,console.log(s(t.classList," at pages\\sousuo\\sousuo.vue:162"))}}),this.getDayHot()},onReachBottom:function(){var t=this;this.page++,o.request({method:"GET",url:"https://api.angeli.top/post.php?type=searchPosts",data:{keyword:this.inputVal,count:20,page:this.page},header:{"content-type":"application/x-www-form-urlencoded",Cookie:a.default.cookie},success:function(o){console.log(s("————————————帖子列表——————————"+t.page," at pages\\sousuo\\sousuo.vue:182")),void 0==o.data.data.length?(t.page--,t.status="noMore"):(t.postList=t.postList.concat(o.data.data),t.status="loading",t.$forceUpdate(),console.log(s(t.postList," at pages\\sousuo\\sousuo.vue:190")))}})},methods:{sososo:function(o){this.home=!1,this.requestSousuo(0)},getDayHot:function(){var t=this;o.request({method:"GET",url:"https://api.angeli.top/user.php?type=getDayHot",header:{"content-type":"application/x-www-form-urlencoded",Cookie:a.default.cookie},success:function(o){t.hotList=o.data.data.data,console.log(s(t.hotList," at pages\\sousuo\\sousuo.vue:213"))}})},requestSousuo:function(t){var e=this;0==t?(o.showLoading({title:"搜索中..",mask:!0}),o.request({method:"GET",url:"https://api.angeli.top/post.php?type=searchPosts",data:{keyword:this.inputVal,count:20,page:this.page},header:{"content-type":"application/x-www-form-urlencoded",Cookie:a.default.cookie},success:function(o){e.postList=[],console.log(s(o.data.data," at pages\\sousuo\\sousuo.vue:237")),console.log(s("————————————帖子列表——————————"," at pages\\sousuo\\sousuo.vue:238")),e.postList=o.data.data,console.log(s(e.postList," at pages\\sousuo\\sousuo.vue:240")),e.weikong=!1,"1"!==o.data.code&&(e.weikong=!0),0==o.data.data&&(e.weikong=!0),o.data.data.length<21&&(e.status="noMore"),e.$forceUpdate()},complete:function(){o.hideLoading()}})):(o.showLoading({title:"搜索中..",mask:!0}),o.request({method:"GET",url:"https://api.angeli.top/user.php?type=search",data:{keyword:this.inputVal},header:{"content-type":"application/x-www-form-urlencoded",Cookie:a.default.cookie},success:function(o){e.userList=[],console.log(s(o.data.data," at pages\\sousuo\\sousuo.vue:274")),console.log(s("————————————搜索用户列表——————————"," at pages\\sousuo\\sousuo.vue:275")),e.userList=o.data.data,console.log(s(e.userList," at pages\\sousuo\\sousuo.vue:277")),e.weikong=!1,"1"!==o.data.code&&(e.weikong=!0),0==o.data.data&&(e.weikong=!0),o.data.data.length<21&&(e.status="noMore"),e.$forceUpdate()},complete:function(){o.hideLoading()}}))},getPOST:function(t){o.navigateTo({url:"../classPost/classPost?id="+t})},getpostinfo:function(t){o.navigateTo({url:"../postinfo/postinfo?id="+t})},getClass:function(t){o.navigateTo({url:"../classPost/classPost?id="+t})},Like:function(t,e,s,n,u){var i=this;if(e!=a.default.userinfo.Auid){if(!0===s)var c="del";else c="add";o.request({method:"GET",url:"https://api.angeli.top/post.php?type=Like",data:{fuid:e,postid:t,mode:c},header:{"content-type":"application/x-www-form-urlencoded",Cookie:a.default.cookie},success:function(t){"1"==t.data.code?("add"==c?(i.postList[n].ZhongcaoCount=Number(u)+1,i.postList[n].Give=!0,o.showToast({title:"种草成功！",position:"bottom",icon:"none"})):(i.postList[n].ZhongcaoCount=Number(u)-1,i.postList[n].Give=!1,o.showToast({title:"取消种草成功！",position:"bottom",icon:"none"})),i.$forceUpdate()):o.showToast({title:"种草失败！",position:"bottom",icon:"none"})},complete:function(){}})}else o.showToast({title:"不能给自己种草",position:"bottom",icon:"none"})},zan:function(){o.showToast({title:"点赞",position:"bottom",icon:"none"})},caidan:function(t){var e=this;t.AuthorId==a.default.userinfo.Auid?this.menuList=["生成海报","举报","删除帖子"]:this.menuList=["生成海报","举报"],o.showActionSheet({itemList:this.menuList,success:function(s){switch(s.tapIndex){case 0:o.showToast({title:"分享"+t.Content,position:"bottom",icon:"none"});break;case 1:o.showToast({title:"举报成功",position:"bottom",icon:"none"}),e.$jubao(t.PostsId,a.default.userinfo.Auid,t.AuthorId,"没有理由");break;case 2:e.$delPost(t.PostsId);break;default:}},fail:function(o){console.log(s(o.errMsg," at pages\\sousuo\\sousuo.vue:414"))}})},tabSelect:function(o){this.TabCur=o,this.requestSousuo(o)},input:function(o){this.inputVal=o.detail.value,this.home=!0,console.log(s(this.inputVal," at pages\\sousuo\\sousuo.vue:425"))},getbieren:function(t){o.navigateTo({url:"../i/bieren?auid="+t})},getHei:function(){var t=this,e=o.createSelectorQuery().select("#topbox");e.fields({size:!0,scrollOffset:!0},function(o){t.gaodu=o.height,console.log(s("总高度："+t.gaodu," at pages\\sousuo\\sousuo.vue:439"))}).exec()},log:function(o){console.log(s(o," at pages\\sousuo\\sousuo.vue:443"))},showImage:function(t,e){o.previewImage({current:e,urls:t,longPressActions:{itemList:["发送给朋友","保存图片","收藏"],success:function(t){o.showToast({title:"选中了第"+(t.tapIndex+1)+"个按钮",position:"bottom",icon:"none"}),console.log(s("选中了第"+(t.tapIndex+1)+"个按钮"," at pages\\sousuo\\sousuo.vue:458"))},fail:function(o){console.log(s(o.errMsg," at pages\\sousuo\\sousuo.vue:462"))}}})},adduser:function(t,e){var s=this;o.request({method:"GET",url:"https://api.angeli.top/user.php?type=gzORungz",data:{uid:t},header:{"content-type":"application/x-www-form-urlencoded",Cookie:a.default.cookie},success:function(t){o.showToast({title:t.data.msg,position:"bottom",icon:"none"}),"关注成功"==t.data.msg?s.hotList[e].AuId.isGz=!0:s.hotList[e].AuId.isGz=!1}})}}};t.default=i}).call(this,e("6e42")["default"],e("0de9")["default"])}},[["cdfe","common/runtime","common/vendor"]]]);