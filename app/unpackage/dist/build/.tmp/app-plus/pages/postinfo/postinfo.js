(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/postinfo/postinfo"],{"149e":function(t,o,e){"use strict";e.r(o);var s=e("c758"),n=e.n(s);for(var i in s)"default"!==i&&function(t){e.d(o,t,function(){return s[t]})}(i);o["default"]=n.a},"1ad3":function(t,o,e){"use strict";var s=function(){var t=this,o=t.$createElement;t._self._c;t._isMounted||(t.e0=function(o){t.showJubao=!1})},n=[];e.d(o,"a",function(){return s}),e.d(o,"b",function(){return n})},2827:function(t,o,e){"use strict";var s=e("e290"),n=e.n(s);n.a},"2a87":function(t,o,e){"use strict";(function(t){e("7e16"),e("921b");s(e("66fd"));var o=s(e("bb4d"));function s(t){return t&&t.__esModule?t:{default:t}}t(o.default)}).call(this,e("6e42")["createPage"])},bb4d:function(t,o,e){"use strict";e.r(o);var s=e("1ad3"),n=e("149e");for(var i in n)"default"!==i&&function(t){e.d(o,t,function(){return n[t]})}(i);e("2827");var a=e("2877"),p=Object(a["a"])(n["default"],s["a"],s["b"],!1,null,null,null);o["default"]=p.exports},c758:function(t,o,e){"use strict";(function(t,s){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=i(e("26f4"));function i(t){return t&&t.__esModule?t:{default:t}}var a={data:function(){return{postInfo:[],pllist:[],dslist:[],showAppFenxiang:!1,showVip:!1,InputBottom:0,plnr:"",xzId:1,postid:"",setvar:"",Give:"0",huifu:!1,gaodu:"-710px",yanse:"rgba(0,0,0,0)",pluid:"",monnumber:1,shunxu:!1,jubao:{postid:0,authorid:0},jubaoliyou:"",showJubao:!1}},onShareAppMessage:function(o){return"button"===o.from&&console.log(t(o.target," at pages\\postinfo\\postinfo.vue:154")),{title:this.postInfo.Content,path:"/pages/postinfo/postinfo?id="+this.postid,desc:this.postInfo.Content,imageUrl:this.postInfo.PictureId[0]}},onLoad:function(o){var e=this;console.log(t("ID:",o.id," at pages\\postinfo\\postinfo.vue:164")),this.postid=o.id,this.getdsList(this.postid),s.getSystemInfo({success:function(o){var e={phonebrand:o.brand+o.model,phonesystem:o.system};n.default.system=JSON.stringify(e),console.log(t(n.default.system," at pages\\postinfo\\postinfo.vue:174"))}}),"fenxiang"==o.type?""==n.default.userinfo.Auid||null==n.default.userinfo.Auid?(s.showLoading({title:"加载中"}),s.login({provider:"weixin",success:function(i){console.log(t(i," at pages\\postinfo\\postinfo.vue:185")),s.request({method:"POST",url:"https://api.angeli.top/reg.php?type=wxlogin",data:{code:i.code,tuijianId:e.tuijianren},header:{"content-type":"application/x-www-form-urlencoded"},success:function(o){console.log(t(o," at pages\\postinfo\\postinfo.vue:198")),"0"==o.data.code?(n.default.usersk=o.data.data.session_key,s.showToast({title:"欢迎你，游客",position:"bottom",icon:"none"}),e.AvatarUrl="https://sz.oss.data.angeli.top/angeli-image/1562320238188110.png"):"1"!=o.data.code&&"2"!=o.data.code||(e.AvatarUrl=o.data.data.AvatarUrl,e.username=o.data.data.UserName,e.zhongcao=o.data.data.ZhongcaoCount,e.guanzhu=o.data.data.FollowedCount,e.fensi=o.data.data.FollowerCount,e.dengji=o.data.data.Rank,e.userid=o.data.data.Auid,e.userInfo=o.data.data,n.default.userinfo=o.data.data,n.default.cookie=o.header["Set-Cookie"],console.log(t("记录cookie：",n.default.cookie," at pages\\postinfo\\postinfo.vue:218")),"2"==o.data.code?s.showToast({title:o.data.msg,position:"bottom",icon:"none"}):e.userInfo.VIPEndTime>0?s.showToast({title:"欢迎VIP："+e.username,position:"bottom",icon:"none"}):s.showToast({title:"欢迎你,"+e.username,position:"bottom",icon:"none"}))},complete:function(){e.getpostinfo(o.id),s.hideLoading()},fail:function(t){s.showToast({title:"未知原因，登录失败！",position:"bottom",icon:"none"})}})},fail:function(n){s.showToast({title:"登录失败",position:"bottom"}),e.getpostinfo(o.id),console.error(t("授权登录失败："+JSON.stringify(n)," at pages\\postinfo\\postinfo.vue:262"))}})):(n.default.userinfo.VIPEndTime>0?s.showToast({title:"欢迎VIP："+n.default.userinfo.username,position:"bottom",icon:"none"}):s.showToast({title:"欢迎你,"+n.default.userinfo.username,position:"bottom",icon:"none"}),this.getpostinfo(o.id)):this.getpostinfo(o.id),console.log(t(this.dslist," at pages\\postinfo\\postinfo.vue:286"))},methods:{appFenxiang:function(o,e){switch(o){case 0:this.showAppFenxiang=!1;break;case 1:s.setClipboardData({data:"http://share.angeli.top/?postId="+this.postid,success:function(){console.log(t("success"," at pages\\postinfo\\postinfo.vue:299"))}}),console.log(t("复制链接"," at pages\\postinfo\\postinfo.vue:302"));break;case 2:console.log(t(this.postInfo.PictureId[0]," at pages\\postinfo\\postinfo.vue:305")),console.log(t(this.postInfo.Content," at pages\\postinfo\\postinfo.vue:306")),console.log(t("http://share.angeli.top/?postId="+this.postid," at pages\\postinfo\\postinfo.vue:307")),s.share({provider:"weixin",scene:"WXSceneSession",type:5,imageUrl:this.postInfo.PictureId[0],title:this.postInfo.Content,miniProgram:{id:"gh_a38adc10b952",path:"pages/postinfo/postinfo?id="+this.postid,type:0,webUrl:"http://share.angeli.top/?postId="+this.postid},success:function(o){console.log(t(JSON.stringify(o)," at pages\\postinfo\\postinfo.vue:321"))},fail:function(o){console.log(t("fail:"+JSON.stringify(o)," at pages\\postinfo\\postinfo.vue:324"))}});break;case 3:s.share({provider:"weixin",scene:"WXSenceTimeline",type:0,href:"http://share.angeli.top/?postId="+this.postid,title:this.postInfo.Content,summary:this.postInfo.Content,imageUrl:this.postInfo.PictureId[0],success:function(o){console.log(t("success:"+JSON.stringify(o)," at pages\\postinfo\\postinfo.vue:338"))},fail:function(o){console.log(t("fail:"+JSON.stringify(o)," at pages\\postinfo\\postinfo.vue:341"))}});break;case 4:s.share({provider:"qq",type:1,href:"http://share.angeli.top/?postId="+this.postid,summary:this.postInfo.Content,title:this.postInfo.Content,imageUrl:this.postInfo.PictureId[0],success:function(o){console.log(t("success:"+JSON.stringify(o)," at pages\\postinfo\\postinfo.vue:354"))},fail:function(o){console.log(t("fail:"+JSON.stringify(o)," at pages\\postinfo\\postinfo.vue:357"))}});break;default:}},sendjubao:function(){this.$jubao(this.jubao.postid,n.default.userinfo.Auid,this.jubao.authorid,this.jubaoliyou),this.showJubao=!1,s.showToast({title:"举报成功",position:"bottom",icon:"none"})},jubaoliyouinput:function(t){this.jubaoliyou=t.target.value},getpostinfo:function(o){var e=this;s.showLoading({title:"加载中"}),s.request({method:"GET",url:"https://api.angeli.top/post.php?type=outPostInfo",data:{id:o,token:n.default.token},header:{"content-type":"application/x-www-form-urlencoded",system:n.default.system},success:function(s){console.log(t("————————————帖子详情——————————"," at pages\\postinfo\\postinfo.vue:395")),e.postInfo=s.data.data,console.log(t(e.postInfo," at pages\\postinfo\\postinfo.vue:397")),e.getplLista(o)},complete:function(){}})},getplLista:function(o){var e=this;s.request({method:"GET",url:"https://api.angeli.top/post.php?type=getpl",data:{postid:o,xu:this.shunxu,count:40,page:1,token:n.default.token},header:{"content-type":"application/x-www-form-urlencoded",system:n.default.system},success:function(o){console.log(t("————————————评论详情——————————"," at pages\\postinfo\\postinfo.vue:422")),e.pllist=o.data.data,console.log(t(e.pllist," at pages\\postinfo\\postinfo.vue:424"))},complete:function(){s.hideLoading()}})},setshunxu:function(){this.shunxu?this.shunxu=!1:this.shunxu=!0,console.log(t(this.shunxu," at pages\\postinfo\\postinfo.vue:437")),this.getplLista(this.postid)},getpllist:function(t){s.navigateTo({url:"plinfo?CommentsId="+t+"&postId="+this.postid})},getClass:function(t){s.navigateTo({url:"../classPost/classPost?id="+t})},caidan:function(o){var e=this;console.log(t(o," at pages\\postinfo\\postinfo.vue:451")),this.Dindex=o,o.AuthorId==n.default.userinfo.Auid?this.menuList=["分享","举报","删除帖子"]:this.menuList=["分享","举报"],s.showActionSheet({itemList:this.menuList,success:function(t){switch(t.tapIndex){case 0:e.showAppFenxiang=!0;break;case 1:e.showJubao=!0,e.jubao.postid=o.PostsId,e.jubao.authorid=o.AuthorId;break;case 2:s.showToast({title:"已删除",position:"bottom",icon:"none"}),e.$delPost(o.PostsId);break;default:}},fail:function(o){console.log(t(o.errMsg," at pages\\postinfo\\postinfo.vue:483"))}})},getbieren:function(t){t==n.default.userinfo.Auid?s.navigateTo({url:"../i/i"}):s.navigateTo({url:"../i/bieren?auid="+t})},getdsList:function(o){var e=this;s.request({method:"GET",url:"https://api.angeli.top/post.php?type=getDashangList&postId="+o,data:{token:n.default.token},header:{"content-type":"application/x-www-form-urlencoded"},success:function(o){"1"==o.data.code?(e.dslist=o.data.data,console.log(t("打赏输出"," at pages\\postinfo\\postinfo.vue:512")),console.log(t(e.dslist," at pages\\postinfo\\postinfo.vue:513")),e.$forceUpdate()):e.dslist=0},complete:function(){}})},getList:function(){s.navigateTo({url:"dashang?id="+this.postid})},getDashang:function(){var o=this;this.postInfo.AuthorId!=n.default.userinfo.Auid?(console.log(t(this.monnumber," at pages\\postinfo\\postinfo.vue:538")),s.request({method:"GET",url:"https://api.angeli.top/post.php?type=dashang",data:{toid:this.postInfo.AuthorId,postid:this.postid,number:this.monnumber,token:n.default.token},header:{"content-type":"application/x-www-form-urlencoded",system:n.default.system},success:function(t){"1"==t.data.code?(o.showVip=!1,o.gaodu="-710px",o.yanse="rgba(0,0,0,0)",s.showToast({title:"打赏成功！",position:"bottom",icon:"none"}),o.$forceUpdate()):s.showToast({title:t.data.msg,position:"bottom",icon:"none"})},complete:function(){}})):s.showToast({title:"不能给自己打赏",position:"bottom",icon:"none"})},hideVip:function(){this.showVip=!1,this.gaodu="-710px",this.yanse="rgba(0,0,0,0)"},xuanze:function(t){switch(t){case 1:this.monnumber=1;break;case 2:this.monnumber=5;break;case 3:this.monnumber=10;break;case 4:this.monnumber=20;break;default:this.monnumber=1;break}this.xzId=t},showKaitong:function(){this.showVip=!0,this.gaodu="0px",this.yanse="rgba(0,0,0,0.4)"},Like:function(t,o,e,i){var a=this;if(""==n.default.userinfo.Auid||null==n.default.userinfo.Auid)return s.showToast({title:"你还没有登录，请登录后再来吧",position:"bottom",icon:"none"}),void setTimeout(function(){s.navigateTo({url:"../reg/reg"})},1200);if(o!=n.default.userinfo.Auid){if(!0===e)var p="del";else p="add";s.request({method:"GET",url:"https://api.angeli.top/post.php?type=Like",data:{fuid:o,postid:t,mode:p,token:n.default.token},header:{"content-type":"application/x-www-form-urlencoded",system:n.default.system},success:function(t){"1"==t.data.code?("add"==p?(a.postInfo.Give=!0,a.postInfo.ZhongcaoCount=Number(i)+1,s.showToast({title:"种草成功！",position:"bottom",icon:"none"})):(a.postInfo.Give=!1,a.postInfo.ZhongcaoCount=Number(i)-1,s.showToast({title:"取消种草成功！",position:"bottom",icon:"none"})),a.$forceUpdate()):s.showToast({title:"种草失败！",position:"bottom",icon:"none"})},complete:function(){}})}else s.showToast({title:"不能给自己种草",position:"bottom",icon:"none"})},InputFocus:function(t){this.InputBottom=t.detail.height},InputBlur:function(t){this.InputBottom=0},pinglun:function(t){this.plnr=t.target.value,0==this.plnr.indexOf("@")?this.huifu=!0:this.huifu=!1},onShareAppMessage:function(o){return"button"===o.from&&console.log(t(o.target," at pages\\postinfo\\postinfo.vue:704")),{title:this.postInfo.Content,path:"/pages/postinfo/postinfo?id="+this.postid+"&type=fenxiang",desc:this.postInfo.Content,imageUrl:this.postInfo.PictureId[0]}},showImage:function(o,e){var n=o[e];s.previewImage({current:e,urls:o,longPressActions:{itemList:["保存图片"],success:function(o){s.downloadFile({url:n,success:function(o){console.log(t(o," at pages\\postinfo\\postinfo.vue:725")),200===o.statusCode?s.saveImageToPhotosAlbum({filePath:o.tempFilePath,success:function(){s.showToast({title:"已保存",position:"bottom",icon:"none"})}}):s.showToast({title:"保存失败",position:"bottom",icon:"none"})}})},fail:function(o){console.log(t(o.errMsg," at pages\\postinfo\\postinfo.vue:749"))}}})},sendpl:function(o){var e=this;if(console.log(t(this.plnr," at pages\\postinfo\\postinfo.vue:755")),"null"!=this.plnr&&""!=this.plnr)if(this.plnr.length>300||this.plnr.length<1)s.showToast({title:"内容最少1个字，最多300字",position:"bottom",icon:"none",mask:!0});else if(this.huifuid&&1==this.huifu){var i=this.plnr.substring(0,this.plnr.indexOf(":")+1),a=this.plnr.replace(i,"");s.showLoading({title:"正在提交数据"}),s.request({method:"POST",url:"https://api.angeli.top/post.php?type=hfpl",data:{id:this.huifuid,txt:a,postid:this.postid,uid:this.pluid,auid:n.default.userinfo.Auid,token:n.default.token},header:{"content-type":"application/x-www-form-urlencoded",system:n.default.system},success:function(o){"1"==o.data.code&&(e.setvar="",e.plnr="",s.request({method:"GET",url:"https://api.angeli.top/post.php?type=getpl",data:{postid:e.postid,token:n.default.token},header:{"content-type":"application/x-www-form-urlencoded",system:n.default.system},success:function(o){console.log(t("————————————评论详情——————————"," at pages\\postinfo\\postinfo.vue:814")),e.pllist=o.data.data,e.plnr,console.log(t(e.pllist," at pages\\postinfo\\postinfo.vue:817"))}})),s.showToast({title:o.data.msg,position:"bottom",icon:"none",duration:2e3,mask:!0})},complete:function(){setTimeout(function(){s.hideLoading()},2e3)}})}else s.showLoading({title:"正在提交数据"}),s.request({method:"POST",url:"https://api.angeli.top/post.php?type=pl",data:{auid:n.default.userinfo.Auid,txt:this.plnr,postid:this.postid,uid:this.postInfo.AuthorId,token:n.default.token},header:{"content-type":"application/x-www-form-urlencoded",system:n.default.system},success:function(o){"1"==o.data.code&&(e.plnr="",e.setvar="",s.request({method:"GET",url:"https://api.angeli.top/post.php?type=getpl",data:{postid:e.postid,token:n.default.token},header:{"content-type":"application/x-www-form-urlencoded"},success:function(o){console.log(t("————————————评论详情——————————"," at pages\\postinfo\\postinfo.vue:873")),e.pllist=o.data.data,console.log(t(e.pllist," at pages\\postinfo\\postinfo.vue:875")),e.plnr}})),s.showToast({title:o.data.msg,position:"bottom",icon:"none",duration:2e3,mask:!0})},complete:function(){setTimeout(function(){s.hideLoading()},2e3)}});else s.showToast({title:"请输入评论内容！",position:"bottom",icon:"none",mask:!0})},dianzan:function(o,e){var i=this;console.log(t("点赞"," at pages\\postinfo\\postinfo.vue:899")),s.request({method:"GET",url:"https://api.angeli.top/post.php?type=dianzan",data:{postid:o,token:n.default.token},header:{"content-type":"application/x-www-form-urlencoded"},success:function(o){if("1"==o.data.code){var n=i.pllist[e].Give;console.log(t(n," at pages\\postinfo\\postinfo.vue:914")),n++,console.log(t(n," at pages\\postinfo\\postinfo.vue:916")),i.$set(i.pllist[e],"Give",n)}s.showToast({title:o.data.msg,position:"bottom",icon:"none",duration:2e3})}})},huifua:function(o,e,s,n){this.huifuid=o,this.setvar="@"+e+": ",this.huifu=!0,this.pluid=n,console.log(t("回复",o,e," at pages\\postinfo\\postinfo.vue:933"))}}};o.default=a}).call(this,e("0de9")["default"],e("6e42")["default"])},e290:function(t,o,e){}},[["2a87","common/runtime","common/vendor"]]]);