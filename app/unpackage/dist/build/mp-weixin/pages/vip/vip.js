(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/vip/vip"],{"0ab1":function(e,n,t){"use strict";t.r(n);var o=t("f239"),i=t("edd8");for(var a in i)"default"!==a&&function(e){t.d(n,e,function(){return i[e]})}(a);t("ec18");var s=t("2877"),u=Object(s["a"])(i["default"],o["a"],o["b"],!1,null,null,null);n["default"]=u.exports},"1a5d":function(e,n,t){},4359:function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=a(t("26f4")),i=a(t("33a2"));function a(e){return e&&e.__esModule?e:{default:e}}function s(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var u={data:function(){return{xzId:1,showVip:!1,gaodu:"-710px",yanse:"rgba(0,0,0,0)",userInfo:[],monnumber:1,money:0,endVipTime:"开通安个利VIP,畅享高级功能",ann:!1}},onLoad:function(){this.userInfo=o.default.userinfo,this.userInfo.VIPEndTime>0&&(this.endVipTime="你已成为安个利VIP，还有"+parseInt(this.userInfo.VIPEndTime)+"天到期",this.ann=!0),console.log(this.userInfo)},methods:{getVip:function(){var n=this;if(this.monnumber>=1){1==this.monnumber?this.money=1:this.money=20*this.monnumber-4*this.monnumber,console.log("月份："+this.monnumber,"金额："+this.money),e.showLoading({title:"加载中"});var t=(0,i.default)("不停"+String(Date.now()));e.request({method:"POST",url:"https://api.angeli.top/WeChat/pay.php?type=vip",data:{openid:o.default.userinfo.wxOpenId,fee:this.money,number:this.monnumber,key:t,auid:o.default.userinfo.Auid},header:{"content-type":"application/x-www-form-urlencoded",Cookie:o.default.cookie},success:function(t){console.log(t);var a=t.data.orderId;if("1"==t.data.code){var u=(0,i.default)(String(Date.now())),r=String(Date.now()),d="appId=wxb2418420ae2cf37c&nonceStr="+u+"&package=prepay_id="+t.data.data.prepay_id+"&signType=MD5&timeStamp="+r+"&key=xinfenghuliankejiyouxiangongsi12",c=(0,i.default)(d);e.requestPayment({provider:"wxpay",timeStamp:r,nonceStr:u,package:"prepay_id="+t.data.data.prepay_id,signType:"MD5",paySign:c,success:function(t){e.showLoading({title:"正在查询中..."}),e.request({method:"GET",url:"https://api.angeli.top/account.php?type=queryOrderIdAndVip",data:{auid:o.default.userinfo.Auid,orderId:a},header:{"content-type":"application/x-www-form-urlencoded",Cookie:o.default.cookie},success:function(t){if(1==t.data.code)if("已支付"==t.data.data.payStatus&&"OK"==t.data.data.payStatus){var o=t.data.data.userInfo.VIPEndTime;n.endVipTime="你已成为安个利VIP，还有"+parseInt(o)+"天到期",console.log("已支付",n.endVipTime),n.showVip=!1,n.ann=!0,e.showToast(s({title:"已开通VIP",position:"bottom",icon:"none"},"position","center")),e.navigateBack()}else e.showToast(s({title:"支付失败！请联系客服",position:"bottom",icon:"none"},"position","center"));else e.showToast(s({title:"支付失败！请联系客服",position:"bottom",icon:"none"},"position","center"))},complete:function(){e.hideLoading()}})},fail:function(n){e.showToast(s({title:"支付失败！请联系客服",position:"bottom",icon:"none"},"position","center"))}})}},complete:function(){e.hideLoading()}})}else e.showToast(s({title:"必须选择月份",position:"bottom",icon:"none"},"position","center"))},showKaitong:function(){this.showVip=!0,this.gaodu="0px",this.yanse="rgba(0,0,0,0.4)"},inputVip:function(e){this.monnumber=e.target.value},hideVip:function(){this.showVip=!1,this.gaodu="-710px",this.yanse="rgba(0,0,0,0)"},xuanze:function(e){switch(e){case 1:this.monnumber=1;break;case 2:this.monnumber=3;break;case 3:this.monnumber=12;break;case 4:break;default:this.monnumber=0;break}this.xzId=e}}};n.default=u}).call(this,t("543d")["default"])},ec18:function(e,n,t){"use strict";var o=t("1a5d"),i=t.n(o);i.a},edd8:function(e,n,t){"use strict";t.r(n);var o=t("4359"),i=t.n(o);for(var a in o)"default"!==a&&function(e){t.d(n,e,function(){return o[e]})}(a);n["default"]=i.a},f239:function(e,n,t){"use strict";var o=function(){var e=this,n=e.$createElement;e._self._c},i=[];t.d(n,"a",function(){return o}),t.d(n,"b",function(){return i})}},[["a762","common/runtime","common/vendor"]]]);