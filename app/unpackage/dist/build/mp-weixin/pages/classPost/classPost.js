(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/classPost/classPost"],{2707:function(t,o,e){"use strict";var n=function(){var t=this,o=t.$createElement;t._self._c},i=[];e.d(o,"a",function(){return n}),e.d(o,"b",function(){return i})},5140:function(t,o,e){"use strict";(function(t){e("7e16"),e("921b");n(e("66fd"));var o=n(e("c72b"));function n(t){return t&&t.__esModule?t:{default:t}}t(o.default)}).call(this,e("543d")["createPage"])},"6a2d":function(t,o,e){"use strict";e.r(o);var n=e("d1bc"),i=e.n(n);for(var s in n)"default"!==s&&function(t){e.d(o,t,function(){return n[t]})}(s);o["default"]=i.a},b4bd:function(t,o,e){},c62f:function(t,o,e){"use strict";var n=e("b4bd"),i=e.n(n);i.a},c72b:function(t,o,e){"use strict";e.r(o);var n=e("2707"),i=e("6a2d");for(var s in i)"default"!==s&&function(t){e.d(o,t,function(){return i[t]})}(s);e("c62f");var a=e("2877"),c=Object(a["a"])(i["default"],n["a"],n["b"],!1,null,null,null);o["default"]=c.exports},d1bc:function(t,o,e){"use strict";(function(t){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n,i=s(e("26f4"));function s(t){return t&&t.__esModule?t:{default:t}}function a(t,o,e){return o in t?Object.defineProperty(t,o,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[o]=e,t}var c=function(){return e.e("components/uni-load-more").then(e.bind(null,"caa8"))},u={components:{uniLoadMore:c},data:function(){return{TabCur:0,postList:[],status:"loading",type:"new",classinfo:[],statusTypes:[{value:"more",text:"加载前",checked:!0},{value:"loading",text:"加载中",checked:!1},{value:"noMore",text:"我是有底线的",checked:!1}],contentText:{contentdown:"查看更多",contentrefresh:"加载中",contentnomore:"我是有底线的"}}},onLoad:function(t){this.classId=t.id,this.getClassInfo(this.classId),this.getPostList(this.classId)},methods:(n={getPushPost:function(){""==i.default.userinfo.Auid||null==i.default.userinfo.Auid?(t.showToast({title:"你还没有登录，请登录后再来吧",position:"bottom",icon:"none"}),setTimeout(function(){t.navigateTo({url:"../reg/reg"})},1200)):(i.default.postClass=this.classinfo,t.navigateTo({url:"../post/post"}))},getClassInfo:function(o){var e=this;t.request({method:"GET",url:"https://api.angeli.top/post.php?type=getClassInfo",data:{classId:o},header:{"content-type":"application/x-www-form-urlencoded",Cookie:i.default.cookie},success:function(o){t.hideLoading(),e.classinfo=[],e.classinfo=o.data.data,console.log(e.classinfo),e.weikong=!1,"1"!==o.data.code&&t.showToast({title:"获取话题信息失败",position:"bottom",icon:"none"}),e.$forceUpdate()}})},getpostinfo:function(o){t.navigateTo({url:"../postinfo/postinfo?id="+o})},getbieren:function(o){o==i.default.userinfo.Auid?t.navigateTo({url:"../i/i"}):t.navigateTo({url:"../i/bieren?auid="+o})},getPostList:function(o){var e=this;t.showLoading({title:"获取数据中"}),t.request({method:"GET",url:"https://api.angeli.top/post.php?type=getClassPostList",data:{page:1,count:20,classId:o,postType:this.type},header:{"content-type":"application/x-www-form-urlencoded",Cookie:i.default.cookie},success:function(o){t.hideLoading(),e.postList=[],console.log("————————————帖子列表——————————"),e.postList=o.data.data,console.log(e.postList),e.weikong=!1,"1"!==o.data.code&&t.showToast({title:"获取帖子失败，建议重启",position:"bottom",icon:"none"}),0==o.data.data&&(e.weikong=!0)},complete:function(){t.hideLoading()}})},showImage:function(o,e){t.previewImage({current:e,urls:o,longPressActions:{itemList:["发送给朋友","保存图片","收藏"],success:function(o){t.showToast({title:"选中了第"+(o.tapIndex+1)+"个按钮",position:"bottom",icon:"none"}),console.log("选中了第"+(o.tapIndex+1)+"个按钮")},fail:function(t){console.log(t.errMsg)}}})},caidan:function(o){console.log(o),this.Dindex=o,o.AuthorId==i.default.userinfo.Auid?this.menuList=["分享给朋友","生成海报","举报","删除帖子"]:this.menuList=["分享给朋友","生成海报","举报"],t.showActionSheet({itemList:this.menuList,success:function(o){switch(o.tapIndex){case 0:t.showToast({title:"分享"+o.Content,position:"bottom",icon:"none"});break;case 1:break;case 2:break;case 3:break;default:}},fail:function(t){console.log(t.errMsg)}})}},a(n,"showImage",function(o,e){t.previewImage({current:e,urls:o,longPressActions:{itemList:["发送给朋友","保存图片","收藏"],success:function(o){t.showToast({title:"选中了第"+(o.tapIndex+1)+"个按钮",position:"bottom",icon:"none"}),console.log("选中了第"+(o.tapIndex+1)+"个按钮")},fail:function(t){console.log(t.errMsg)}}})}),a(n,"Like",function(o,e,n,s){var a=this;if(!0===n)var c="del";else c="add";t.request({method:"GET",url:"https://api.angeli.top/post.php?type=Like",data:{fuid:e,postid:o,mode:c},header:{"content-type":"application/x-www-form-urlencoded",Cookie:i.default.cookie},success:function(o){"1"==o.data.code?("add"==c?(a.postList[s].Give=!0,t.showToast({title:"种草成功！",position:"bottom",icon:"none"})):(a.postList[s].Give=!1,t.showToast({title:"取消种草成功！",position:"bottom",icon:"none"})),a.$forceUpdate()):t.showToast({title:"种草失败！",position:"bottom",icon:"none"})},complete:function(){}})}),a(n,"tabSelect",function(t){this.TabCur=t,this.type=0==t?"new":"hot"}),n)};o.default=u}).call(this,e("543d")["default"])}},[["5140","common/runtime","common/vendor"]]]);