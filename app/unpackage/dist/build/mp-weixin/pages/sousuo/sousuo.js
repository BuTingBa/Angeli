(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/sousuo/sousuo"],{2602:function(t,o,e){"use strict";var n=e("9d2a"),s=e.n(n);s.a},"63bb":function(t,o,e){"use strict";var n=function(){var t=this,o=t.$createElement;t._self._c},s=[];e.d(o,"a",function(){return n}),e.d(o,"b",function(){return s})},"63fd":function(t,o,e){"use strict";e.r(o);var n=e("ff76"),s=e.n(n);for(var a in n)"default"!==a&&function(t){e.d(o,t,function(){return n[t]})}(a);o["default"]=s.a},"956f":function(t,o,e){"use strict";e.r(o);var n=e("63bb"),s=e("63fd");for(var a in s)"default"!==a&&function(t){e.d(o,t,function(){return s[t]})}(a);e("2602");var i=e("2877"),u=Object(i["a"])(s["default"],n["a"],n["b"],!1,null,null,null);o["default"]=u.exports},"9d2a":function(t,o,e){},cdfe:function(t,o,e){"use strict";(function(t){e("7e16"),e("921b");n(e("66fd"));var o=n(e("956f"));function n(t){return t&&t.__esModule?t:{default:t}}t(o.default)}).call(this,e("543d")["createPage"])},ff76:function(t,o,e){"use strict";(function(t){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=s(e("26f4"));function s(t){return t&&t.__esModule?t:{default:t}}var a=function(){return e.e("components/uni-load-more").then(e.bind(null,"caa8"))},i={components:{uniLoadMore:a},data:function(){return{gaodu:0,classList:[],home:!0,TabCur:0,inputVal:"",postList:[],userList:[],page:1,status:"loading",statusTypes:[{value:"more",text:"加载前",checked:!0},{value:"loading",text:"加载中",checked:!1},{value:"noMore",text:"我是有底线的",checked:!1}],contentText:{contentdown:"查看更多",contentrefresh:"加载中",contentnomore:"我是有底线的"},weikong:!0,hotList:[]}},onReady:function(){this.getHei()},onLoad:function(){var o=this;t.request({method:"GET",url:"https://api.angeli.top/post.php?type=getClassList",header:{"content-type":"application/x-www-form-urlencoded",Cookie:n.default.cookie},success:function(t){o.classList=t.data.data,console.log(o.classList)}}),this.getDayHot()},onReachBottom:function(){var o=this;this.page++,t.request({method:"GET",url:"https://api.angeli.top/post.php?type=searchPosts",data:{keyword:this.inputVal,count:20,page:this.page},header:{"content-type":"application/x-www-form-urlencoded",Cookie:n.default.cookie},success:function(t){console.log("————————————帖子列表——————————"+o.page),void 0==t.data.data.length?(o.page--,o.status="noMore"):(o.postList=o.postList.concat(t.data.data),o.status="loading",o.$forceUpdate(),console.log(o.postList))}})},methods:{sososo:function(t){this.home=!1,this.requestSousuo(0)},getDayHot:function(){var o=this;t.request({method:"GET",url:"https://api.angeli.top/user.php?type=getDayHot",header:{"content-type":"application/x-www-form-urlencoded",Cookie:n.default.cookie,system:n.default.system},success:function(t){o.hotList=t.data.data.data,console.log(o.hotList)}})},requestSousuo:function(o){var e=this;0==o?(t.showLoading({title:"搜索中..",mask:!0}),t.request({method:"GET",url:"https://api.angeli.top/post.php?type=searchPosts",data:{keyword:this.inputVal,count:20,page:this.page},header:{"content-type":"application/x-www-form-urlencoded",Cookie:n.default.cookie,system:n.default.system},success:function(t){e.postList=[],console.log(t.data.data),console.log("————————————帖子列表——————————"),e.postList=t.data.data,console.log(e.postList),e.weikong=!1,"1"!==t.data.code&&(e.weikong=!0),0==t.data.data&&(e.weikong=!0),t.data.data.length<21&&(e.status="noMore"),e.$forceUpdate()},complete:function(){t.hideLoading()}})):(t.showLoading({title:"搜索中..",mask:!0}),t.request({method:"GET",url:"https://api.angeli.top/user.php?type=search",data:{keyword:this.inputVal},header:{"content-type":"application/x-www-form-urlencoded",Cookie:n.default.cookie,system:n.default.system},success:function(t){e.userList=[],console.log(t.data.data),console.log("————————————搜索用户列表——————————"),e.userList=t.data.data,console.log(e.userList),e.weikong=!1,"1"!==t.data.code&&(e.weikong=!0),0==t.data.data&&(e.weikong=!0),t.data.data.length<21&&(e.status="noMore"),e.$forceUpdate()},complete:function(){t.hideLoading()}}))},getPOST:function(o){t.navigateTo({url:"../classPost/classPost?id="+o})},getpostinfo:function(o){t.navigateTo({url:"../postinfo/postinfo?id="+o})},getClass:function(o){t.navigateTo({url:"../classPost/classPost?id="+o})},Like:function(o,e,s,a,i){var u=this;if(e!=n.default.userinfo.Auid){if(!0===s)var c="del";else c="add";t.request({method:"GET",url:"https://api.angeli.top/post.php?type=Like",data:{fuid:e,postid:o,mode:c},header:{"content-type":"application/x-www-form-urlencoded",Cookie:n.default.cookie},success:function(o){"1"==o.data.code?("add"==c?(u.postList[a].ZhongcaoCount=Number(i)+1,u.postList[a].Give=!0,t.showToast({title:"种草成功！",position:"bottom",icon:"none"})):(u.postList[a].ZhongcaoCount=Number(i)-1,u.postList[a].Give=!1,t.showToast({title:"取消种草成功！",position:"bottom",icon:"none"})),u.$forceUpdate()):t.showToast({title:"种草失败！",position:"bottom",icon:"none"})},complete:function(){}})}else t.showToast({title:"不能给自己种草",position:"bottom",icon:"none"})},zan:function(){t.showToast({title:"点赞",position:"bottom",icon:"none"})},caidan:function(o){var e=this;o.AuthorId==n.default.userinfo.Auid?this.menuList=["生成海报","举报","删除帖子"]:this.menuList=["生成海报","举报"],t.showActionSheet({itemList:this.menuList,success:function(s){switch(s.tapIndex){case 0:t.showToast({title:"分享"+o.Content,position:"bottom",icon:"none"});break;case 1:t.showToast({title:"举报成功",position:"bottom",icon:"none"}),e.$jubao(o.PostsId,n.default.userinfo.Auid,o.AuthorId,"没有理由");break;case 2:e.$delPost(o.PostsId);break;default:}},fail:function(t){console.log(t.errMsg)}})},tabSelect:function(t){this.TabCur=t,this.requestSousuo(t)},input:function(t){this.inputVal=t.detail.value,this.home=!0,console.log(this.inputVal)},getbieren:function(o){t.navigateTo({url:"../i/bieren?auid="+o})},getHei:function(){var o=this,e=t.createSelectorQuery().select("#topbox");e.fields({size:!0,scrollOffset:!0},function(t){o.gaodu=t.height,console.log("总高度："+o.gaodu)}).exec()},log:function(t){console.log(t)},showImage:function(o,e){t.previewImage({current:e,urls:o,longPressActions:{itemList:["发送给朋友","保存图片","收藏"],success:function(o){t.showToast({title:"选中了第"+(o.tapIndex+1)+"个按钮",position:"bottom",icon:"none"}),console.log("选中了第"+(o.tapIndex+1)+"个按钮")},fail:function(t){console.log(t.errMsg)}}})},adduser:function(o,e){var s=this;t.request({method:"GET",url:"https://api.angeli.top/user.php?type=gzORungz",data:{uid:o},header:{"content-type":"application/x-www-form-urlencoded",Cookie:n.default.cookie},success:function(o){t.showToast({title:o.data.msg,position:"bottom",icon:"none"}),"关注成功"==o.data.msg?s.hotList[e].AuId.isGz=!0:s.hotList[e].AuId.isGz=!1}})}}};o.default=i}).call(this,e("543d")["default"])}},[["cdfe","common/runtime","common/vendor"]]]);