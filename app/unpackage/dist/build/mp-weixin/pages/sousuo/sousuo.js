(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/sousuo/sousuo"],{2602:function(t,e,o){"use strict";var s=o("9d2a"),n=o.n(s);n.a},"63fd":function(t,e,o){"use strict";o.r(e);var s=o("ff76"),n=o.n(s);for(var i in s)"default"!==i&&function(t){o.d(e,t,function(){return s[t]})}(i);e["default"]=n.a},"8d7e":function(t,e,o){"use strict";var s=function(){var t=this,e=t.$createElement;t._self._c},n=[];o.d(e,"a",function(){return s}),o.d(e,"b",function(){return n})},"956f":function(t,e,o){"use strict";o.r(e);var s=o("8d7e"),n=o("63fd");for(var i in n)"default"!==i&&function(t){o.d(e,t,function(){return n[t]})}(i);o("2602");var a=o("2877"),c=Object(a["a"])(n["default"],s["a"],s["b"],!1,null,null,null);e["default"]=c.exports},"9d2a":function(t,e,o){},cdfe:function(t,e,o){"use strict";(function(t){o("7e16"),o("921b");s(o("66fd"));var e=s(o("956f"));function s(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("543d")["createPage"])},ff76:function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(o("26f4"));function n(t){return t&&t.__esModule?t:{default:t}}var i=function(){return o.e("components/uni-load-more").then(o.bind(null,"caa8"))},a={components:{uniLoadMore:i},data:function(){return{gaodu:0,classList:[],home:!0,TabCur:0,inputVal:"",postList:[],userList:[],Dindex:[],showAppFenxiang:!1,page:1,status:"loading",statusTypes:[{value:"more",text:"加载前",checked:!0},{value:"loading",text:"加载中",checked:!1},{value:"noMore",text:"我是有底线的",checked:!1}],contentText:{contentdown:"查看更多",contentrefresh:"加载中",contentnomore:"我是有底线的"},weikong:!0,hotList:[]}},onReady:function(){this.getHei()},onLoad:function(){var e=this;t.request({method:"GET",url:"https://api.angeli.top/post.php?type=getClassList",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){e.classList=t.data.data,console.log(e.classList)}}),this.getDayHot()},onReachBottom:function(){var e=this;this.page++,t.request({method:"GET",url:"https://api.angeli.top/post.php?type=searchPosts",data:{keyword:this.inputVal,count:20,page:this.page,token:s.default.token},header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){console.log("————————————帖子列表——————————"+e.page),void 0==t.data.data.length?(e.page--,e.status="noMore"):(e.postList=e.postList.concat(t.data.data),e.status="loading",e.$forceUpdate(),console.log(e.postList))}})},methods:{appFenxiang:function(e,o){switch(e){case 0:this.showAppFenxiang=!1;break;case 1:t.setClipboardData({data:"http://share.angeli.top/?postId="+this.postid,success:function(){console.log("success")}}),console.log("复制链接");break;case 2:console.log(this.Dindex.PictureId[0]),console.log(this.Dindex.Content),console.log("http://share.angeli.top/?postId="+this.Dindex.PostsId),t.share({provider:"weixin",scene:"WXSceneSession",type:5,imageUrl:this.Dindex.PictureId[0],title:this.Dindex.Content,miniProgram:{id:"gh_a38adc10b952",path:"pages/postinfo/postinfo?id="+this.Dindex.PostsId,type:0,webUrl:"http://share.angeli.top/?postId="+this.Dindex.PostsId},success:function(t){console.log(JSON.stringify(t))},fail:function(t){console.log("fail:"+JSON.stringify(t))}});break;case 3:t.share({provider:"weixin",scene:"WXSenceTimeline",type:0,href:"http://share.angeli.top/?postId="+this.Dindex.PostsId,title:this.Dindex.Content,summary:this.Dindex.Content,imageUrl:this.Dindex.PictureId[0],success:function(t){console.log("success:"+JSON.stringify(t))},fail:function(t){console.log("fail:"+JSON.stringify(t))}});break;case 4:t.share({provider:"qq",type:1,href:"http://share.angeli.top/?postId="+this.Dindex.PostsId,summary:this.Dindex.Content,title:this.Dindex.Content,imageUrl:this.Dindex.PictureId[0],success:function(t){console.log("success:"+JSON.stringify(t))},fail:function(t){console.log("fail:"+JSON.stringify(t))}});break;default:}},sososo:function(t){this.home=!1,this.requestSousuo(0)},getDayHot:function(){var e=this;t.request({method:"GET",url:"https://api.angeli.top/user.php?type=getDayHot",data:{token:s.default.token},header:{"content-type":"application/x-www-form-urlencoded",system:s.default.system},success:function(t){e.hotList=t.data.data.data,console.log(e.hotList)}})},requestSousuo:function(e){var o=this;0==e?(t.showLoading({title:"搜索中..",mask:!0}),t.request({method:"GET",url:"https://api.angeli.top/post.php?type=searchPosts",data:{keyword:this.inputVal,count:20,page:this.page,token:s.default.token},header:{"content-type":"application/x-www-form-urlencoded",system:s.default.system},success:function(t){o.postList=[],console.log(t.data.data),console.log("————————————帖子列表——————————"),o.postList=t.data.data,console.log(o.postList),o.weikong=!1,"1"!==t.data.code&&(o.weikong=!0),0==t.data.data&&(o.weikong=!0),t.data.data.length<21&&(o.status="noMore"),o.$forceUpdate()},complete:function(){t.hideLoading()}})):(t.showLoading({title:"搜索中..",mask:!0}),t.request({method:"GET",url:"https://api.angeli.top/user.php?type=search",data:{keyword:this.inputVal,token:s.default.token},header:{"content-type":"application/x-www-form-urlencoded",system:s.default.system},success:function(t){o.userList=[],console.log(t.data.data),console.log("————————————搜索用户列表——————————"),o.userList=t.data.data,console.log(o.userList),o.weikong=!1,"1"!==t.data.code&&(o.weikong=!0),0==t.data.data&&(o.weikong=!0),t.data.data.length<21&&(o.status="noMore"),o.$forceUpdate()},complete:function(){t.hideLoading()}}))},getPOST:function(e){t.navigateTo({url:"../classPost/classPost?id="+e})},getpostinfo:function(e){t.navigateTo({url:"../postinfo/postinfo?id="+e})},getClass:function(e){t.navigateTo({url:"../classPost/classPost?id="+e})},Like:function(e,o,n,i,a){var c=this;if(o!=s.default.userinfo.Auid){if(!0===n)var u="del";else u="add";t.request({method:"GET",url:"https://api.angeli.top/post.php?type=Like",data:{fuid:o,postid:e,mode:u,token:s.default.token},header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){"1"==e.data.code?("add"==u?(c.postList[i].ZhongcaoCount=Number(a)+1,c.postList[i].Give=!0,t.showToast({title:"种草成功！",position:"bottom",icon:"none"})):(c.postList[i].ZhongcaoCount=Number(a)-1,c.postList[i].Give=!1,t.showToast({title:"取消种草成功！",position:"bottom",icon:"none"})),c.$forceUpdate()):t.showToast({title:"种草失败！",position:"bottom",icon:"none"})},complete:function(){}})}else t.showToast({title:"不能给自己种草",position:"bottom",icon:"none"})},zan:function(){t.showToast({title:"点赞",position:"bottom",icon:"none"})},caidan:function(e){var o=this;e.AuthorId==s.default.userinfo.Auid?this.menuList=["分享","举报","删除帖子"]:this.menuList=["分享","举报"],t.showActionSheet({itemList:this.menuList,success:function(n){switch(n.tapIndex){case 0:o.showAppFenxiang=!0;break;case 1:t.showToast({title:"举报成功",position:"bottom",icon:"none"}),o.$jubao(e.PostsId,s.default.userinfo.Auid,e.AuthorId,"没有理由");break;case 2:o.$delPost(e.PostsId);break;default:}},fail:function(t){console.log(t.errMsg)}})},tabSelect:function(t){this.TabCur=t,this.requestSousuo(t)},input:function(t){this.inputVal=t.detail.value,this.home=!0,console.log(this.inputVal)},getbieren:function(e){t.navigateTo({url:"../i/bieren?auid="+e})},getHei:function(){var e=this,o=t.createSelectorQuery().select("#topbox");o.fields({size:!0,scrollOffset:!0},function(t){e.gaodu=t.height,console.log("总高度："+e.gaodu)}).exec()},log:function(t){console.log(t)},showImage:function(e,o){var s=e[o];t.previewImage({current:o,urls:e,longPressActions:{itemList:["保存图片"],success:function(e){t.downloadFile({url:s,success:function(e){console.log(e),200===e.statusCode?t.saveImageToPhotosAlbum({filePath:e.tempFilePath,success:function(){t.showToast({title:"已保存",position:"bottom",icon:"none"})}}):t.showToast({title:"保存失败",position:"bottom",icon:"none"})}})},fail:function(t){console.log(t.errMsg)}}})},adduser:function(e,o){var n=this;t.request({method:"GET",url:"https://api.angeli.top/user.php?type=gzORungz",data:{uid:e,token:s.default.token},header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){t.showToast({title:e.data.msg,position:"bottom",icon:"none"}),"关注成功"==e.data.msg?n.hotList[o].AuId.isGz=!0:n.hotList[o].AuId.isGz=!1}})}}};e.default=a}).call(this,o("543d")["default"])}},[["cdfe","common/runtime","common/vendor"]]]);